<% if (locals.errors) { %>
  <ul class="notice">
    <% locals.errors.forEach(error => { %>
      <li><%= error.msg %></li>
    <% }) %>
  </ul>
<% } %>

<form action="/account/register" method="POST" class="registration-form">
    <div class="form-group">
        <label for="account_firstname">First Name:</label>
        <input type="text" id="account_first_name" name="account_first_name" required
                value="<%= locals.account_first_name ? locals.account_first_name : '' %>">
    </div>
    <div class="form-group">
        <label for="account_last_name">Last Name:</label>
        <input type="text" id="account_last_name" name="account_last_name" required
                value="<%= locals.account_last_name ? locals.account_last_name : '' %>">
    </div>
    <div class="form-group">
        <label for="account_email">Email Address:</label>
        <input type="email" id="account_email" name="account_email" required
                value="<%= locals.account_email ? locals.account_email : '' %>">
    </div>
    <div class="form-group">
        <label for="account_password">Password:</label>
        <div class="password-wrapper">
            <input type="password" id="account_password" name="account_password" required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()-+=])(?=.*[a-zA-Z]).{12,}" title="Password must be at least 12 characters and contain at least 1 capital letter, 1 number, and 1 special character (e.g., !@#$%^&*()-+=)">
            <span class="password-toggle" onclick="togglePasswordVisibility()">ğŸ‘ï¸</span>
        </div>
        <p class="password-requirements">
            Password must be:
            <ul>
                <li>At least 12 characters in length</li>
                <li>Contain at least 1 capital letter</li>
                <li>Contain at least 1 number</li>
                <li>Contain at least 1 special character (e.g., !@#$%^&*()-+=)</li>
            </ul>
        </p>
    </div>
    <button type="submit" class="btn-submit">Register</button>
</form>

<script>
  function togglePasswordVisibility() {
    const passwordField = document.getElementById("account_password");
    const toggleButton = document.querySelector(".password-toggle");
    if (passwordField.type === "password") {
      passwordField.type = "text";
      toggleButton.textContent = "ğŸ”’"; // Change icon to a locked eye or similar
    } else {
      passwordField.type = "password";
      toggleButton.textContent = "ğŸ‘ï¸"; // Change icon back to an open eye or similar
    }
  }
</script>
<%- messages() %>